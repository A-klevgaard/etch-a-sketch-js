<!--TO DO
1) MAKE AN EVENT HANDLER THAT CONTROLS THE MODE OF THE ETCH A SKETCH
-->
<!DOCTYPE html>
<html>
<head>
  <title>Etch-a-Sketch-in-js</title>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width", initial-scale="1.0">
  <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>

    <div id="title-block">
    <h1>Etch-a-Sketch</h1>
    </div>

    <div id="controls-container">
      <div id="controls">
        <button type="button" id="new-grid-button" onclick="customGrid(); return false">Make a New Grid</button>
        <div id="mode-group">
          <label class="control-label" for="black-white"><input type="radio" id="black-white" class="mode" name="mode" value="1" checked="true"> Black</label>
          <label class="control-label" for="dimmer"><input type="radio" id="dimmer" class="mode" name="mode" value="2"> Dimmer</label>
          <label class="control-label" for="color-rdm"><input type="radio" id="color-rdm" class="mode" name="mode" value="3"> Random Color</label>
        </div> <!--End mode-group-->
      </div><!--End controls-->
    </div><!--End controls-container-->

    <!--The etch a sketch grid will be populated with javascript-->
    <div id="grid-container">
    <div id="sketch-container"></div>
    </div>

  
  <script>
    let sketchMode = 1; //global variable used to store what the current sketch mode is. Controlled by page radio buttons

//*************************************************************************************************************
//Functions used to create and manipulate the etch a sketch grid
//*************************************************************************************************************
    //*************************************************************************************************************
    //Creates the grid for the etch a sketch
    function makeGrid(SideL) {
      const container = document.querySelector('#sketch-container');
      container.style.gridTemplateColumns = `repeat(${SideL}, ${100/SideL}%)`
      container.style.gridTemplateRows = `repeat(${SideL}, ${100/SideL}%)`
      for (let i = 0; i < (SideL*SideL); ++i ) {
      let mkDiv = document.createElement('div');
      mkDiv.setAttribute("class", "sketch-pixel");
      container.appendChild(mkDiv);
      }
    }
    //*************************************************************************************************************
    //removes the grid from the etch a sketch
    function removeGrid() {
      const container = document.querySelector('#sketch-container');
      while (container.firstChild) {
        container.removeChild(container.lastChild);
      }

    }
    //*************************************************************************************************************
    //makes a grid with a user specified side length
    function customGrid() {
      let sideLength = prompt("Enter the amount of pixels on the new grid's side...")

      //type check to ensure user enters a valid number
      if (+sideLength === parseInt(sideLength)) {

        //delete replace the previous grid with a new one and refresh the event handler for the new grid
        removeGrid();        
        makeGrid((sideLength));
        eventRefresh();
      }
      else {
        alert("That is not a valid number.");
      }
    }

  //*************************************************************************************************************
  //Event handlers
  //*************************************************************************************************************
  //*************************************************************************************************************
  //attaches new event listeners to each cell in the new grid
  function eventRefresh() {
      //event handlers used to control the etch a sketch
      let pixelGrid = document.querySelectorAll('.sketch-pixel');
      //iterates through the node list and checks to see if the mouse has entered a pixel
      pixelGrid.forEach((pixel) => {
        pixel.addEventListener('mouseenter', () => {
          pixel.classList.toggle("on-pixel");
          console.log("the pixel should have changed color");
        });
      });
  }
  //*************************************************************************************************************
  //listens to see if the user selects a different drawing mode
  let radioButtons = document.querySelectorAll('.mode');
  radioButtons.forEach((radio) => {
    radio.addEventListener('change', () => {
      sketchMode = radio.value;
      console.log(sketchMode); });
  });

    //upon page load populates the webpage with a 4x4 grad  
    makeGrid(4);
    eventRefresh();
  </script>
</body>
</html>